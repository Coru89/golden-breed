{{ 'section-testimonials.css' | asset_url | stylesheet_tag }}
{% comment %}
  <link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css"/>
  <script type="text/javascript" src="//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>
{% endcomment %}

<script src="https://cdnjs.cloudflare.com/ajax/libs/Glide.js/3.2.0/glide.min.js" integrity="sha512-IkLiryZhI6G4pnA3bBZzYCT9Ewk87U4DGEOz+TnRD3MrKqaUitt+ssHgn2X/sxoM7FxCP/ROUp6wcxjH/GcI5Q==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Glide.js/3.2.0/css/glide.core.min.css" integrity="sha512-YQlbvfX5C6Ym6fTUSZ9GZpyB3F92hmQAZTO5YjciedwAaGRI9ccNs4iw2QTCJiSPheUQZomZKHQtuwbHkA9lgw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
{% comment %} <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tiny-slider/2.9.4/tiny-slider.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/tiny-slider/2.9.2/min/tiny-slider.js"></script> {% endcomment %}

{% comment %}
  {%- assign background_image = block.settings.background_image -%}
  {{ background_image | image_url: width: background_image.width | image_tag: class: 'add_your_class_here', loading: 'lazy' }}
  {{ block.settings.quote }}
  {{ block.settings.name }}
{% endcomment %}

<section class="testimonials">
  <div class="glide">
    <div class="glide__track" data-glide-el="track">
      <ul class="testimonials__slides glide__slides">
        {%- for block in section.blocks -%}
          {%- assign background_image = block.settings.background_image -%}
          <div class="testimonials__slide glide__slide">
            {%- case block.type -%}
              {%- when 'testimonial' -%}
                <div class="testimonials__content">
                  <div class="testimonials__name">
                    {{ block.settings.name }}
                  </div>
                  <div class="testimonials__quote">
                    {{ block.settings.quote }}
                  </div>
                </div>

                <div class="testimonials__image-container">
                  <div class="testimonials__image-overlay"></div>
                  {{ background_image | image_url: width: background_image.width | image_tag: class: 'testimonials__image', loading: 'lazy' }}
                </div>
            {%- endcase -%}
          </div>
        {%- endfor -%}
      </ul>
    </div>
    <div class="testimonials__arrows glide__arrows" data-glide-el="controls">
      <button class="testimonials__arrow testimonials__arrow--left glide__arrow glide__arrow--left" data-glide-dir="<">
        <svg width="19" height="36" viewBox="0 0 19 36" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M17.75 34.875L0.875 18L17.75 1.125" stroke="white" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          
      </button>
      <button class="testimonials__arrow testimonials__arrow--right glide__arrow glide__arrow--right" data-glide-dir=">">
        <svg width="19" height="36" viewBox="0 0 19 36" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M1.25 1.125L18.125 18L1.25 34.875" stroke="white" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>        
      </button>
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Testimonials",
  "settings": [],
  "blocks": [
    {
      "name": "Testimonial",
      "type": "testimonial",
      "settings": [
        {
          "type": "text",
          "id": "name",
          "label": "Name",
          "placeholder": "Name Surname"
        },
        {
          "type": "textarea",
          "id": "quote",
          "label": "Quote",
          "default": "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse varius enim in eros elementum tristique. Duis cursus, mi quis viverra ornare."
        },
        {
          "type": "image_picker",
          "id": "background_image",
          "label": "Background Image"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Testimonials"
    }
  ]
}
{% endschema %}

<script>

  var glide = new Glide('.glide', {
    type: 'carousel',
    autoplay: 10000,
    gap: 30,
    perView: 1,
    peek: {
      before: 180,
      after: 180
    },
    breakpoints: {
      750: {
        gap: 100
      },
      peek: {
        before: 0,
        after: 0
      },
    }
  }).mount();

  {% comment %} Breakpoints.match({
    600: { perView: 1 },
    1200: { perView: 3 }
  }) {% endcomment %}

  {% comment %} glide.mount({Breakpoints}); {% endcomment %}
</script>

{% comment %} <script type="module">
  document.addEventListener('DOMContentLoaded', function () {
    var slider = tns({
      container: '.testimonials',
      items: 2,
      arrowKeys: true,
    });
  });
</script> {% endcomment %}
